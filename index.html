<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checklist COFCO International</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { margin: 0; padding: 0; overflow-x: hidden; }
        .animate-fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        const MobileForm = () => {
          const [currentStep, setCurrentStep] = useState(-1);
          const [showQR, setShowQR] = useState(true);
          const [showWelcome, setShowWelcome] = useState(false);
          const [showPerfilOpcao, setShowPerfilOpcao] = useState(false);
          const [showConclusao, setShowConclusao] = useState(false);
          const [perfilSalvo, setPerfilSalvo] = useState(null);
          const [assinatura, setAssinatura] = useState('');
          const [dataHoraConclusao, setDataHoraConclusao] = useState(null);
          const [assinaturaFormulario, setAssinaturaFormulario] = useState('');
          const canvasRef = useRef(null);
          const canvasFormRef = useRef(null);
          const [isDrawing, setIsDrawing] = useState(false);
          const [isDrawingForm, setIsDrawingForm] = useState(false);
          const [formData, setFormData] = useState({
            tipoServico: '', subTipoServico: '', numeroCNH: '', nomeCompleto: '',
            transportadora: '', tipoVeiculo: '', placaVeiculo: '', episSeguranca: [],
            telefoneWhatsapp: '', regrasAceitas: false, avisosAceitos: false,
            termoAceito: false, email: '', telefone: '', idade: '', interesse: '', mensagem: ''
          });

          const questions = [
            {
              id: 'tipoServico', question: 'Qual o tipo de presta√ß√£o de servi√ßo ser√° realizado?',
              type: 'servico-tipo',
              options: [
                { value: 'Entrega', emoji: 'üì¶' },
                { value: 'Descarga', emoji: 'üöõ' },
                { value: 'Coleta', emoji: 'üìã' }
              ],
              subOptions: {
                'Entrega': [{ value: 'Almoxarifado', emoji: 'üè≠' }, { value: 'Outros', emoji: 'üìù' }],
                'Descarga': [{ value: 'Gesso ou Calc√°rio', emoji: '‚öôÔ∏è' }, { value: 'Outros', emoji: 'üìù' }],
                'Coleta': [{ value: 'Almoxarifado', emoji: 'üè≠' }, { value: 'Outros', emoji: 'üìù' }]
              }
            },
            { id: 'nomeCompleto', question: 'Qual √© o seu nome completo?', type: 'text', placeholder: 'Digite seu nome completo', minWords: 2 },
            { id: 'transportadora', question: 'Qual √© a Transportadora?', type: 'text', placeholder: 'Digite o nome da transportadora', minLength: 3 },
            {
              id: 'tipoVeiculo', question: 'Qual √© o tipo do ve√≠culo?', type: 'veiculo-tipo',
              options: [{ value: 'Ve√≠culo Leve', emoji: 'üöó' }, { value: 'Ve√≠culo de Carga', emoji: 'üöö' }]
            },
            {
              id: 'episSeguranca', question: 'Quais EPIs de seguran√ßa voc√™ est√° usando?', type: 'epis-multiple',
              subtitle: 'Selecione todos que se aplicam',
              options: [
                { value: 'Botas de Seguran√ßa', emoji: 'ü•æ', color: 'from-amber-500 to-orange-600' },
                { value: 'Colete Refletivo', emoji: 'ü¶∫', color: 'from-yellow-400 to-amber-500' },
                { value: '√ìculos de Prote√ß√£o', emoji: 'ü•Ω', color: 'from-blue-400 to-indigo-500' },
                { value: 'Capacete com Jugular', emoji: '‚õëÔ∏è', color: 'from-red-500 to-rose-600' },
                { value: 'Protetor Auricular', emoji: 'üéß', color: 'from-green-500 to-emerald-600' }
              ]
            },
            { id: 'telefoneWhatsapp', question: 'Qual √© o seu n√∫mero para contato e WhatsApp?', type: 'telefone', placeholder: '(00) 00000-0000' }
          ];

          const currentQuestion = questions[currentStep];
          
          useEffect(() => {
            const perfilLocal = localStorage.getItem('perfilChecklistCofco');
            if (perfilLocal) {
              try {
                const perfil = JSON.parse(perfilLocal);
                setPerfilSalvo(perfil);
                if (perfil.numeroCNH) {
                  setFormData(prev => ({ ...prev, numeroCNH: perfil.numeroCNH }));
                }
              } catch (e) {
                console.error('Erro ao carregar perfil:', e);
              }
            }
          }, []);

          // TELA QR CODE
          if (showQR) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-600 via-blue-400 to-cyan-300 flex items-center justify-center p-4">
                <div className="bg-white rounded-3xl shadow-2xl p-6 max-w-md w-full text-center">
                  <h1 className="text-4xl font-bold text-gray-800 mb-1">COFCO</h1>
                  <h2 className="text-3xl font-bold text-blue-600 mb-3">International</h2>
                  <p className="text-gray-600 text-sm mb-6">Formul√°rio de Acesso</p>
                  
                  <button
                    onClick={() => {
                      setShowQR(false);
                      setShowWelcome(true);
                    }}
                    className="w-full bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold py-3 px-6 rounded-xl hover:shadow-lg transform hover:scale-105 transition-all duration-200"
                  >
                    Abrir Formul√°rio
                  </button>
                </div>
              </div>
            );
          }

          // TELA BEM-VINDO
          if (showWelcome) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-600 via-blue-400 to-cyan-300 flex items-center justify-center p-4">
                <div className="bg-white rounded-3xl shadow-2xl overflow-hidden max-w-md w-full">
                  <div className="bg-gradient-to-r from-blue-600 to-cyan-500 p-8 text-center">
                    <h1 className="text-3xl font-bold text-white mb-2">Bem-vindo √†</h1>
                    <h2 className="text-2xl font-bold text-white">COFCO International</h2>
                  </div>
                  <div className="p-8">
                    <h3 className="text-2xl font-bold text-gray-800 mb-4 text-center">Checklist de Seguran√ßa</h3>
                    
                    <div className="space-y-4 mb-8">
                      <div className="flex items-start gap-3 p-4 bg-blue-50 rounded-xl border-2 border-blue-200">
                        <div className="flex-shrink-0 w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center mt-0.5 text-white text-xs">
                          ‚úì
                        </div>
                        <div>
                          <p className="font-semibold text-gray-800">EPIs obrigat√≥rios</p>
                          <p className="text-sm text-gray-600">Capacete, √≥culos de prote√ß√£o, luvas e cal√ßado de seguran√ßa</p>
                        </div>
                      </div>

                      <div className="flex items-start gap-3 p-4 bg-blue-50 rounded-xl border-2 border-blue-200">
                        <div className="flex-shrink-0 w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center mt-0.5 text-white text-xs">
                          ‚úì
                        </div>
                        <div>
                          <p className="font-semibold text-gray-800">√Årea sinalizada</p>
                          <p className="text-sm text-gray-600">Verifique a sinaliza√ß√£o e respeite os limites de seguran√ßa</p>
                        </div>
                      </div>

                      <div className="flex items-start gap-3 p-4 bg-blue-50 rounded-xl border-2 border-blue-200">
                        <div className="flex-shrink-0 w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center mt-0.5 text-white text-xs">
                          ‚úì
                        </div>
                        <div>
                          <p className="font-semibold text-gray-800">Condi√ß√µes do ambiente</p>
                          <p className="text-sm text-gray-600">Ambiente limpo, organizado e sem riscos aparentes</p>
                        </div>
                      </div>

                      <div className="flex items-start gap-3 p-4 bg-blue-50 rounded-xl border-2 border-blue-200">
                        <div className="flex-shrink-0 w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center mt-0.5 text-white text-xs">
                          ‚úì
                        </div>
                        <div>
                          <p className="font-semibold text-gray-800">Procedimentos conhecidos</p>
                          <p className="text-sm text-gray-600">Estou ciente dos procedimentos de seguran√ßa da √°rea</p>
                        </div>
                      </div>
                    </div>
                    
                    <button
                      onClick={() => {
                        setShowWelcome(false);
                        if (perfilSalvo) {
                          setShowPerfilOpcao(true);
                        } else {
                          setCurrentStep(0);
                        }
                      }}
                      className="w-full bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-bold py-4 px-6 rounded-xl hover:shadow-lg transform hover:scale-105 transition-all duration-200 flex items-center justify-center gap-2"
                    >
                      Iniciar Checklist
                      <span>‚Üí</span>
                    </button>

                    <p className="text-center text-sm text-gray-500 mt-4">
                      üõ°Ô∏è Sua seguran√ßa √© nossa prioridade
                    </p>
                  </div>
                </div>
              </div>
            );
          }

          // TELA EM DESENVOLVIMENTO (tempor√°ria)
          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-600 via-blue-400 to-cyan-300 flex items-center justify-center p-4">
              <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center">
                <h1 className="text-2xl font-bold text-gray-800 mb-4">‚úÖ Funcionou Perfeitamente!</h1>
                <p className="text-gray-600 mb-4">O formul√°rio est√° carregando corretamente.</p>
                <div className="bg-green-50 border-2 border-green-300 rounded-xl p-4">
                  <p className="text-green-800 font-semibold">üéâ Pronto para adicionar as pr√≥ximas telas!</p>
                  <p className="text-sm text-gray-600 mt-2">Etapa atual: {currentStep}</p>
                </div>
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(MobileForm));
    </script>
</body>
</html>
